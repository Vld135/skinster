# Условия и контроль

Ноды условий позволяют создавать ветвления в workflow — выполнять разные действия в зависимости от состояния аккаунтов. Ноды контроля управляют потоком выполнения.

---

## Has Pass?

Проверяет наличие активного Armory Pass у аккаунтов. В зависимости от результата workflow пойдёт по ветке **yes** или **no**.

| Параметр | Описание | Тип | По умолчанию |
|----------|----------|-----|--------------|
| Аккаунты | Фильтрация аккаунтов из контекста | `contextFilter` | Все |
| Мин. кол-во активных | Минимальное количество активных пропусков для прохождения (1-5) | `number` | 1 |
| Условие | Как проверять аккаунты | `select` | У всех достаточно |
| Порог процента | Минимальный процент аккаунтов с достаточным кол-вом пропусков (0-100) | `number` | 50 |

### Режимы проверки

* **У всех достаточно пропусков** — условие выполняется если **все** аккаунты имеют >= указанного количества активных пропусков
* **Хотя бы у одного достаточно** — условие выполняется если **хотя бы один** аккаунт имеет достаточно пропусков
* **Ни у кого нет достаточно** — условие выполняется если **ни один** аккаунт не имеет достаточно пропусков
* **Процент с достаточным кол-вом** — условие выполняется если указанный процент аккаунтов имеет достаточно пропусков

{% hint style="info" %}
Параметр **Порог процента** отображается только при выборе условия "Процент с достаточным кол-вом".
{% endhint %}

### Выходы

| Выход | Когда |
|-------|-------|
| **yes** | Условие выполняется |
| **no** | Условие не выполняется |

### Пример использования

Покупка пропусков только если их недостаточно:

1. **Has Pass?** — проверяем наличие пропуска (мин. 1, условие: "У всех достаточно")
2. Выход **yes** → переходим к фарму (пропуски уже есть)
3. Выход **no** → переходим к **Buy Passes** → **Activate Armory Pass** → затем к фарму

---

## Delay

Добавляет задержку между шагами workflow. Полезно для паузы между действиями, чтобы не нагружать серверы или имитировать естественное поведение.

| Параметр | Описание | Тип | По умолчанию |
|----------|----------|-----|--------------|
| Тип задержки | Фиксированная или случайная в диапазоне | `select` | Фиксированная |
| Длительность (секунды) | Фиксированная задержка в секундах (1-86400) | `number` | 30 |
| Минимум (секунды) | Минимальная случайная задержка (1-86400) | `number` | 10 |
| Максимум (секунды) | Максимальная случайная задержка (1-86400) | `number` | 60 |

### Типы задержки

* **Фиксированная** — задержка ровно на указанное количество секунд
* **Случайная в диапазоне** — случайная задержка в пределах от "Минимум" до "Максимум"

{% hint style="info" %}
Задержка корректно обрабатывает остановку и паузу workflow. Если workflow поставлен на паузу, время паузы не учитывается. Проверка на отмену происходит каждые 5 секунд.
{% endhint %}

### Выходы

| Выход | Когда |
|-------|-------|
| **output** | Задержка завершена |
